!function(e){var t={};function l(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,l),o.l=!0,o.exports}l.m=e,l.c=t,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(i,o,function(t){return e[t]}.bind(null,o));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=12)}({1:function(e,t,l){"use strict";l.d(t,"a",(function(){return i})),l.d(t,"b",(function(){return o}));const i=e=>{let t=Math.round(255*e.r).toString(16),l=Math.round(255*e.g).toString(16),i=Math.round(255*e.b).toString(16);return("0".repeat(2-t.length)+t+"0".repeat(2-l.length)+l+"0".repeat(2-i.length)+i).toUpperCase()},o=e=>"matrix("+[e[0][0].toFixed(2),e[1][0].toFixed(2),e[0][1].toFixed(2),e[1][1].toFixed(2),e[0][2].toFixed(2),e[1][2].toFixed(2)].join(",")+")"},12:function(e,t,l){"use strict";l.r(t);var i=l(1),o=function(e,t,l,i){return new(l||(l=Promise))((function(o,n){function a(e){try{r(i.next(e))}catch(e){n(e)}}function s(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(a,s)}r((i=i.apply(e,t||[])).next())}))};figma.showUI(__html__,{width:610,height:560});let n=0,a=[],s=[];function r(e,t){if(e.length!=t.length)return!1;let l=!0;for(var o=0;o<e.length;o++){if(e[o].type!=t[o].type){l=!1;break}if("SOLID"===e[o].type){if(e[o].opacity!=t[o].opacity||Object(i.a)(e[o].color)!=Object(i.a)(t[o].color)||e[o].blendMode!=t[o].blendMode){l=!1;break}}else if(JSON.stringify(e[o])!=JSON.stringify(t[o])){l=!1;break}}return l}function f(e){let t=[];for(let l of e){if("IMAGE"===l.type)return[];l.visible&&t.push(l)}return t.sort()}function c(e,t){let l=-1;for(var i=0;i<e.length;i++)if(r(e[i].fills,t)){l=i;break}return l}function u(e){let t=Object.keys(e),l=t[0];for(var i=1;i<t.length;i++)"Team "===t[i].slice(0,5)?("Local"===l.slice(0,5)||"unlinked"===l.slice(0,8)||e[t[i]].count>e[l].count)&&(l=t[i]):"Local"===t[i].slice(0,5)&&("unlinked"===l.slice(0,8)||"Local"===l.slice(0,5)&&e[t[i]].count>e[l].count)&&(l=t[i]);return l}figma.ui.onmessage=e=>o(void 0,void 0,void 0,(function*(){switch(yield figma.loadFontAsync({family:"Roboto",style:"Regular"}),yield figma.loadFontAsync({family:"Roboto",style:"Bold"}),e.type){case"scan":n=0,a=[],s=[],function e(t){if(t.children&&t.children.forEach(l=>{l.visible&&"BOOLEAN_OPERATION"!=t.type&&e(l)}),Array.isArray(t.fills)&&t.fills){let e=f(t.fills);if(0!=e.length){let i=c(a,e),o=t.fillStyleId.toString();null===(l=figma.getStyleById(o))?(o="unlinked",o+=-1===i?JSON.stringify(e):JSON.stringify(a[i].fills)):o=!0===l.remote?"Team "+o:"Local"+o;let n="";null!=l&&(n=l.name),-1===i?a.push({fills:e,styles:{[o]:{count:1,name:n,nodes:["fills  "+t.id]}},total:1}):a[i].styles[o]?(a[i].styles[o].count++,a[i].styles[o].nodes.push("fills  "+t.id),a[i].total++):(a[i].styles[o]={count:1,name:n,nodes:["fills  "+t.id]},a[i].total++)}}if(Array.isArray(t.strokes)&&t.strokes){let e=f(t.strokes);if(0!=e.length){let i=c(a,e),o=t.strokeStyleId.toString();var l;o=null===(l=figma.getStyleById(o))?"unlinked"+JSON.stringify(e):!0===l.remote?"Team "+o:"Local"+o;let n="";null!=l&&(n=l.name),-1===i?a.push({fills:e,styles:{[o]:{count:1,name:n,nodes:["strokes"+t.id]}},total:1}):a[i].styles[o]?(a[i].styles[o].count++,a[i].styles[o].nodes.push("strokes"+t.id),a[i].total++):(a[i].styles[o]={count:1,name:n,nodes:["strokes"+t.id]},a[i].total++)}}n+=1}(figma.currentPage),a.sort((e,t)=>e.total<t.total?1:-1),a.forEach(e=>{s.push(u(e.styles))}),figma.ui.postMessage({type:"count",value:a,mergeSelection:s});break;case"merge link":let t=e.data.fills,l=u(e.data.styles),o={fills:t,styles:{[l]:{count:e.data.total,name:e.data.styles[l].name,nodes:[]}},total:e.data.total};Object.keys(e.data.styles).forEach(i=>{e.data.styles[i].nodes.forEach(e=>{o.styles[l].nodes.push(e)}),i!=l&&e.data.styles[i].nodes.forEach(e=>{let i=figma.getNodeById(e.slice(7));null===i&&figma.notify("You have modified the page. Please refresh.",{timeout:2e3}),"fills"in i&&"fills  "===e.slice(0,7)?(i.fills=t,i.fillStyleId=l.slice(5)):"strokes"in i&&"strokes"===e.slice(0,7)&&(i.strokes=t,i.strokeStyleId=l.slice(5))})}),a[e.index]=o,figma.ui.postMessage({type:"update",value:a}),figma.notify("All styles merged and linked.",{timeout:2e3});break;case"create":figma.notify("this feature is not available currently.",{timeout:2e3});break;case"select style":let r=[];for(let t of e.data)null===figma.getNodeById(t.slice(7))?figma.notify("You have modified the page. Please refresh.",{timeout:2e3}):r.push(figma.getNodeById(t.slice(7)));figma.currentPage.selection=r,figma.viewport.scrollAndZoomIntoView(r),figma.ui.postMessage({type:"select style",id:e.id}),figma.notify(r.length.toString()+" elements selected.",{timeout:2e3});break;case"generate":let d=[],y=[],g=0;a.forEach((e,t)=>{if("unlinked"!=s[t].slice(0,8)){let l=g%6*290,o=140*Math.floor(g/6),n=figma.createRectangle();n.x=l,n.y=o,n.fills=e.fills,n.fillStyleId=s[t].slice(5);let a=figma.createText();a.characters=e.styles[s[t]].name,a.x=l+116,a.y=o,a.fontSize=16,a.fontName={family:"Roboto",style:"Bold"},a.resize(150,20);let r=[n,a];e.fills.forEach((e,t)=>{let n=figma.createText();switch(e.type){case"SOLID":n.characters=Object(i.a)(e.color);break;case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":case"GRADIENT_ANGULAR":case"GRADIENT_DIAMOND":n.characters=e.type.slice(9,10)+e.type.slice(10).toLowerCase();break;default:n.characters="Unkown Style"}n.x=l+116,n.y=o+40+20*t,n.fontSize=14,n.fontName={family:"Roboto",style:"Regular"},n.resize(60,16),r.push(n);let a=figma.createText();a.characters=(100*e.opacity).toFixed(2).replace(/\.0+$/,"")+"%",a.x=l+176,a.y=o+40+20*t,a.fontSize=14,a.fontName={family:"Roboto",style:"Regular"},a.resize(60,16),r.push(a)}),d.push(figma.group(r,figma.currentPage)),g++}}),0!=d.length&&(y.push(figma.group(d,figma.currentPage)),figma.currentPage.appendChild(y[0]),figma.currentPage.selection=y,figma.viewport.scrollAndZoomIntoView(y))}}))}});